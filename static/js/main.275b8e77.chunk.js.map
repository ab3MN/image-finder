{"version":3,"sources":["components/App.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.module.css","helpers/mapper.js","Services/imgApi.js","components/Searchbar/Searchbar.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/Button/Button.jsx","components/ImageGallery/ImageGallery.jsx","components/ErrorNotification/ErrorNotification.jsx","components/Modal/Modal.jsx","components/Loader/Loader.jsx","components/App.jsx","index.js","components/ImageGallery/ImageGallery.module.css","components/Modal/Modal.module.css"],"names":["module","exports","mapper","data","map","webImage","webformatURL","largeImage","largeImageURL","props","BASE_URL","KEY","fetchImg","query","page","axios","get","Searchbar","onChange","onSubmit","className","styles","SearchForm","type","SearchForm_button","SearchForm_button_label","SearchForm_input","autoComplete","placeholder","ImageGalleryItem","link","onClick","src","alt","ImageGalleryItem_image","aria-hidden","Button","ImageGallery","images","onClickModal","img","key","id","ErrorNotification","text","imgRef","createRef","Modal","handleKeyPress","e","code","closeModal","handleClick","target","current","window","addEventListener","this","Overlay","ref","Component","ImageLoader","color","height","width","timeout","App","state","isLoading","error","isModalOpen","modalImage","scrollFunc","scrollTo","top","document","documentElement","scrollHeight","behavior","fetchImages","setState","then","hits","catch","finally","handleChange","value","handleSubmit","preventDefault","loadMore","prevState","response","openModal","find","prevProps","inputValue","message","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.275b8e77.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__3C5j1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem_image\":\"ImageGalleryItem_ImageGalleryItem_image__18VF2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2R247\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__NWcLi\",\"SearchForm\":\"Searchbar_SearchForm__1DIVx\",\"SearchForm_button\":\"Searchbar_SearchForm_button__2LUbl\",\"SearchForm_button_label\":\"Searchbar_SearchForm_button_label__10Evd\",\"SearchForm_input\":\"Searchbar_SearchForm_input__3x5Ax\"};","const mapper = data => {\n  return data.map(\n    ({ webformatURL: webImage, largeImageURL: largeImage, ...props }) => ({\n      webImage,\n      largeImage,\n      ...props,\n    }),\n  );\n};\n\nexport default mapper;\n","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/?';\nconst KEY = '17165161-1d54c685ea0a2bff5ee7aa4bf';\nconst PER_PAGE = 12;\n\nconst fetchImg = (query = '', page = 1) =>\n  axios.get(\n    `${BASE_URL}key=${KEY}&q=${query}&per_page=${PER_PAGE}&page=${page}`,\n  );\n\nexport default fetchImg;\n","import React from 'react';\nimport T from 'prop-types';\nimport styles from './Searchbar.module.css';\n\nconst Searchbar = ({ onChange, onSubmit }) => (\n  <header className={styles.Searchbar}>\n    <form className={styles.SearchForm} onSubmit={onSubmit}>\n      <button type=\"submit\" className={styles.SearchForm_button}>\n        <span className={styles.SearchForm_button_label}>Search</span>\n      </button>\n\n      <input\n        onChange={onChange}\n        className={styles.SearchForm_input}\n        type=\"text\"\n        autoComplete=\"off\"\n        placeholder=\"Search images and photos\"\n      />\n    </form>\n  </header>\n);\n\nSearchbar.propTypes = {\n  onChange: T.func.isRequired,\n  onSubmit: T.func.isRequired,\n};\n\nexport default Searchbar;\n","import React from 'react';\nimport T from 'prop-types';\nimport styles from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ link, onClick }) => (\n  <img\n    src={link}\n    alt=\"\"\n    className={styles.ImageGalleryItem_image}\n    onClick={onClick}\n    aria-hidden\n  />\n);\n\nImageGalleryItem.propTypes = {\n  link: T.string.isRequired,\n  onClick: T.func.isRequired,\n};\n\nexport default ImageGalleryItem;\n","import React from 'react';\nimport T from 'prop-types';\nimport styles from './Button.module.css';\n\nconst Button = ({ onClick }) => (\n  <button type=\"button\" className={styles.Button} onClick={onClick}>\n    Load more\n  </button>\n);\n\nButton.propTypes = {\n  onClick: T.func.isRequired,\n};\n\nexport default Button;\n","import React from 'react';\nimport T from 'prop-types';\nimport ImageGalleryItem from '../ImageGalleryItem/ImageGalleryItem';\nimport Button from '../Button/Button';\nimport styles from './ImageGallery.module.css';\n\nconst ImageGallery = ({ images, onClick, onClickModal }) => (\n  <ul className={styles.ImageGallery}>\n    {images.map(img => (\n      <li className={styles.ImageGalleryItem} key={img.id}>\n        <ImageGalleryItem\n          link={img.webImage}\n          onClick={() => onClickModal(img.id)}\n        />\n      </li>\n    ))}\n    <Button onClick={onClick} />\n  </ul>\n);\n\nImageGallery.propTypes = {\n  images: T.arrayOf(\n    T.shape({\n      id: T.number.isRequired,\n      webImage: T.string.isRequired,\n    }).isRequired,\n  ).isRequired,\n  onClick: T.func.isRequired,\n  onClickModal: T.func.isRequired,\n};\n\nexport default ImageGallery;\n","import React from 'react';\nimport T from 'prop-types';\n\nconst ErrorNotification = ({ text }) => <h2>Wrong some error{text}</h2>;\n\nErrorNotification.propTypes = {\n  text: T.string.isRequired,\n};\n\nexport default ErrorNotification;\n","import React, { Component, createRef } from 'react';\nimport T from 'prop-types';\nimport styles from './Modal.module.css';\n\nconst imgRef = createRef();\n\nexport default class Modal extends Component {\n  static propTypes = {\n    closeModal: T.func.isRequired,\n    link: T.string.isRequired,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyPress);\n  }\n\n  componentDidUpdate() {\n    window.addEventListener('keydown', this.handleKeyPress);\n  }\n\n  handleKeyPress = e => {\n    if (e.code !== 'Escape') return;\n    this.props.closeModal();\n  };\n\n  handleClick = e => {\n    if (e.target !== imgRef.current) {\n      this.props.closeModal();\n    }\n  };\n\n  render() {\n    const { link } = this.props;\n    return (\n      <div className={styles.Overlay} onClick={this.handleClick} aria-hidden>\n        <div className={styles.Modal}>\n          <img src={link} alt=\"\" ref={imgRef} />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nimport Loader from 'react-loader-spinner';\n\nconst ImageLoader = () => (\n  <Loader type=\"Puff\" color=\"#00BFFF\" height={100} width={100} timeout={3000} />\n);\n\nexport default ImageLoader;\n","import React, { Component } from 'react';\n\nimport mapper from '../helpers/mapper';\nimport styles from './App.module.css';\n\nimport fetchImg from '../Services/imgApi';\nimport Searchbar from './Searchbar/Searchbar';\nimport ImageGallery from './ImageGallery/ImageGallery';\nimport ErrorNotification from './ErrorNotification/ErrorNotification';\nimport Modal from './Modal/Modal';\nimport ImageLoader from './Loader/Loader';\n\nexport default class App extends Component {\n  state = {\n    images: [],\n    isLoading: false,\n    error: null,\n    query: '',\n    page: 1,\n    isModalOpen: false,\n    modalImage: '',\n  };\n\n  // componentDidMount() {\n  //   this.fetchImages();\n  // }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { images } = this.state;\n    if (images !== prevState.images) {\n      this.scrollFunc();\n    }\n  }\n\n  scrollFunc = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n\n  fetchImages = (query, page) => {\n    this.setState({\n      isLoading: true,\n    });\n\n    fetchImg(query, page)\n      .then(({ data }) =>\n        this.setState({\n          images: mapper(data.hits),\n        }),\n      )\n      .catch(error => this.setState({ error }))\n      .finally(() => this.setState({ isLoading: false }));\n  };\n\n  handleChange = e => {\n    const { value } = e.target;\n\n    this.setState({\n      query: value,\n    });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    this.setState({\n      images: [],\n    });\n\n    const { query, page } = this.state;\n    this.fetchImages(query, page);\n  };\n\n  loadMore = () => {\n    this.setState(\n      prevState => ({\n        page: prevState.page + 1,\n      }),\n      () => {\n        const { query, page } = this.state;\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        });\n        fetchImg(query, page).then(response =>\n          this.setState(state => ({\n            images: [...state.images, ...mapper(response.data.hits)],\n          })),\n        );\n      },\n    );\n  };\n\n  openModal = id => {\n    const { images } = this.state;\n    const link = images.find(img => img.id === id).largeImage;\n\n    this.setState({\n      modalImage: link,\n      isModalOpen: true,\n    });\n  };\n\n  closeModal = () => {\n    this.setState({\n      isModalOpen: false,\n    });\n  };\n\n  render() {\n    const {\n      images,\n      error,\n      isModalOpen,\n      modalImage,\n      isLoading,\n      inputValue,\n    } = this.state;\n    return (\n      <section className={styles.App}>\n        {error && <ErrorNotification text={error.message} />}\n        <Searchbar\n          onChange={this.handleChange}\n          onSubmit={this.handleSubmit}\n          value={inputValue}\n        />\n        {isLoading && <ImageLoader />}\n        {images.length > 0 && (\n          <ImageGallery\n            images={images}\n            onClick={this.loadMore}\n            onClickModal={this.openModal}\n          />\n        )}\n        {isModalOpen && (\n          <Modal link={modalImage} closeModal={this.closeModal} />\n        )}\n      </section>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport './main.module.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__f3Hmq\",\"ImageGalleryItem\":\"ImageGallery_ImageGalleryItem__1NvUu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__1mYzE\",\"Modal\":\"Modal_Modal__1T9ZZ\"};"],"sourceRoot":""}